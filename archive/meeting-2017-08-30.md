2017-08-30

NECKO WEEKLY MEETING NOTES

Thurs August 24th, 2017

STICKY

- Triage duty: nwgh
-  new untriaged bugs: https://tinyurl.com/zhk9yjf
- NECKO-ACTIVE bugs: https://tinyurl.com/j8pj35u
- NECKO NEXT bugs: https://tinyurl.com/zjwjfee
- NECKO-BACKLOG bugs:  https://tinyurl.com/hpkcxx3
- Triage Notes
    - Android crashes on infra are currently not symbolicated: https://bugzilla.mozilla.org/show_bug.cgi?id=1389805 (makes triaging/diagnosing android crash bugs hard/impossible)

Round Table:

(15:48:00) annevk: if y'all have meetings, could you bring up fixing https://bugzilla.mozilla.org/show_bug.cgi?id=1363284 as part of some Quantum effort

(15:48:28) annevk: we even have Google devrel volunteering to draw up graphics how it makes Firefox faster than Chrome

(15:49:05) annevk: https://twitter.com/annevk/status/901493567855710208

---PROJECT UPDATES---
    - rust-url meeting notes: https://public.etherpad-mozilla.org/p/mozloha-rust-url
    - rcwn https://public.etherpad-mozilla.org/p/mozaloha-rcwn

Nick

Honza

Michal

 - 1382688 Do not allow to enable old disk cache backend
 - 1392841 Enable RCWN on Nightly

Patrick

  last week: mpendingq, 256fd telemetry, 0.9 telemetry, namespaces, neat tls, alt-svc, immutable bug, some non-necko stuff
  this week: neat tls, alt-svc, immutable bug, some non-necko stuff. more reviews.

Daniel

 - NEAT project work
 - IPv6 network identification

Valentin

Bug 1369317 - Optimized data URI parsing by ~20% [landed]

Bug 1306646 - Match updated Timing-Allow-Origin definition. [landed]

Bug 919391 - Incorrect Navigation Timing API: performance.timing.responseStart - performance.timing.requestStart <0 [landed]

Bug 1392260 - resource-timing - Fix error in gzip_xml.py [landed]

working on:

threadsafe URIs

other resource-timing bugs

Dragana

TFO

rel=preload and no-cache

JAR

gmail issue - Bug 1389772 (reports in bug 1380896 gmail is slow or stops responding)

Bug 1391543 - Network stops occasionally during "Performing a TLS handshake to..."

Gary

Bug 1373708 - Convert Jar channels to stop using main thread I/O

- test_bug364677.html checks feedHandler (defined in subscribe.xhtml) before it is being loaded.

Junior

Bug 870460 - Lazy load of cookie service blocks main thread while cookie database loads

 - feedback granted, functional work, fixing treeherder

Amy

Bug 1376009 - Crash in mozalloc_abort | NS_DebugBreak | mozilla::ipc::LogicError | mozilla::net::PCookieServiceChild::SendGetCookieString

* Landed
Measured the performance analysis

* Used a sikuli to test cnn.com on Nightly.
* Found the function which is used to get cookies string on Chromium.
* Wrote a testing webpage which used native getter and setter to replace document.cookie.
* Nightly
* Version: 57.0a1
* Average Set Cookie Time: 33.75ms
* Average Get Cookies Time:0.64ms
* Max Get Cookies Time:1ms
* Total Get Cookies Time:3.354ms
* Chrome
* Version: 60.0.3112.101
* Average Set Cookie Time: 5.16ms
* Average Get Cookies Time:0.51ms
* Max Get Cookies Time:0.73ms
* Total Get Cookies Time:2.658ms

Kershaw

CDP Test

 - Create a web site to present test results
 - http://10.247.28.241:8888/

Bug 1385576 - Tracking Protection broken in Nightly.

 - investigating

Bug 1388247 - Label PCookieServiceChild

 - working

SC

[PBg-Http]

 - performance analysis
   - find out why window.onload / DOMContentLoaded event is delayed after PBg-Http is enabled
    - StopRequestEvent is delayed because tasks generated by HTML parser is queued on main thread earlier, causing a long <script> execution and reflow to run before window.onload / DOMContentLoaded
    - detailed report: https://docs.google.com/a/mozilla.com/presentation/d/1H4F5Ac3PPnJmzGlbkXyFIvdeI8iEtef9SMrCiYwYAWg/edit?usp=sharing
   - experimenting the performance difference between different configuration (4*3 experiments)
    - ODA retargeting ( all on / all off / off for HTML parser )
    - PBg IPC ( all on / all off / disable for HTML parser / enable for image )
    - the best configuration for TALOS is to only turn off PBg-IPC for loading main HTML document.
     - this configuration will fix the sessionrestore_many_window performance regression.
     - facebook performance difference is reduced from 30-50 to 15 ms (first paint time)
     - perfherder link: https://treeherder.mozilla.org/perf.html#/compare?originalProject=try&originalRevision=fd6dceb87671ff98461f935a0be00678f017264b&newProject=try&newRevision=ead7b792855462e3843cf7f175d9bf157a2f3dfd&framework=1&showOnlyImportant=0&showOnlyConfident=1
    - need to get gecko profiler info for analysis the facebook performance regression
 - trying to get CC/GC log from treeherder for investigating bug 1353829 (awsy regression - image memory usage increased), but failed
